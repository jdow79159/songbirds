(this.webpackJsonpsongbird=this.webpackJsonpsongbird||[]).push([[0],{32:function(e,t,n){e.exports=n(49)},37:function(e,t,n){},49:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),l=n.n(c),i=(n(37),n(1)),s=n(9),o=n(30),u=n(8),m=n(4);function d(e){return"0".concat(e).slice(-2)}function b(e){var t=new Date(1e3*e),n=t.getUTCHours(),a=t.getUTCMinutes(),r=d(t.getUTCSeconds());return n?"".concat(n,":").concat(d(a),":").concat(r):"".concat(a,":").concat(r)}function f(e){for(var t=Object(u.a)(e),n=t.length-1;n>0;n-=1){var a=Math.floor(Math.random()*(n+1)),r=t[n];t[n]=t[a],t[a]=r}return t}function E(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,a=[],r=f(e),c=r.map((function(e){return e.id})),l=n<c.length?n:c.length,i=function(e){var n=[],l=Object(m.a)({},r[e],{correct:!0,clicked:!1});n.push(l),f(c.filter((function(t,n){return n!==e}))).slice(0,t<=0?5:t-1).forEach((function(e){var t=r.find((function(t){return t.id===e}));t.correct=!1,t.clicked=!1,n.push(t)})),a.push(f(n))},s=0;s<l;s+=1)i(s);return a}var p={loading:!0,data:[],error:!1,currentQuestionId:0,questionsNames:["\u0412\u043e\u043f\u0440\u043e\u0441 1","\u0412\u043e\u043f\u0440\u043e\u0441 2","\u0412\u043e\u043f\u0440\u043e\u0441 3","\u0412\u043e\u043f\u0440\u043e\u0441 4","\u0412\u043e\u043f\u0440\u043e\u0441 5"],questions:[],isGetCorrectAnswer:!1,activeId:null,totalScore:0,localScore:5,playing:!1},g=Object(s.c)({birds:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_DATA":var n=t.payload.error;return Object(m.a)({},e,{data:t.payload.data,questions:n?[]:E(t.payload.data),loading:!1,error:n});case"START_LOADING":return Object(m.a)({},e,{error:!1,loading:!0});case"ON_CLICK_ANSWER":var a=e.currentQuestionId,r=e.questions[a].findIndex((function(e){return e.id===t.payload})),c=Object(m.a)({},e.questions[a][r]);if(!e.isGetCorrectAnswer&&!c.clicked){c.clicked=!0;var l=c.correct,i=l?e.totalScore+e.localScore:e.totalScore,s=l?5:e.localScore-1,o=!l&&e.playing,d=[].concat(Object(u.a)(e.questions[a].slice(0,r)),[c],Object(u.a)(e.questions[a].slice(r+1))),b=[].concat(Object(u.a)(e.questions.slice(0,a)),[d],Object(u.a)(e.questions.slice(a+1)));return Object(m.a)({},e,{questions:b,isGetCorrectAnswer:l,activeId:t.payload,localScore:s,totalScore:i,playing:o})}return Object(m.a)({},e,{activeId:t.payload});case"ON_CLICK_NEXT_QUESTION":return e.questions.length-1>e.currentQuestionId&&e.isGetCorrectAnswer?Object(m.a)({},e,{currentQuestionId:e.currentQuestionId+1,isGetCorrectAnswer:!1,activeId:null}):e;case"ON_CLICK_RESTART":return Object(m.a)({},p,{loading:!1,data:e.data,questions:E(e.data)});case"ON_SET_PLAYING":return Object(m.a)({},e,{playing:!e.playing});default:return e}}}),v=Object(s.d)(g,Object(s.a)(o.a)),y=function(){var e=Object(i.c)((function(e){return e.birds.questionsNames})),t=Object(i.c)((function(e){return e.birds.currentQuestionId})),n=e.map((function(e,n){return r.a.createElement("li",{className:n===t?"list-group-item text-center active":"list-group-item text-center",key:e.id},e)}));return r.a.createElement("section",{className:"py-2"},r.a.createElement("ul",{className:"list-group list-group-horizontal justify-content-center row"},n))},j=n(3),O=n(12),N=n.n(O),h=function(e){var t=e.url,n=e.playing,c=e.setPlaying,l=Object(a.useState)(!0),i=Object(j.a)(l,2),s=i[0],o=i[1],u=Object(a.useState)(!1),m=Object(j.a)(u,2),d=m[0],f=m[1],E=Object(a.useState)(0),p=Object(j.a)(E,2),g=p[0],v=p[1],y=Object(a.useState)(null),O=Object(j.a)(y,2),h=O[0],x=O[1],w=Object(a.useRef)(null);Object(a.useEffect)((function(){v(0)}),[t]);var k=b(g),S=h?b(h):"",C=n?"fa fa-pause":"fa fa-play",I=r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"d-flex justify-content-between"},r.a.createElement("time",null,k),r.a.createElement("button",{type:"button",className:"btn btn-outline-primary",onClick:function(){c(!n)}},r.a.createElement("i",{className:C,"aria-hidden":"true"})),r.a.createElement("time",null,S)),r.a.createElement("input",{type:"range",className:"custom-range",id:"customRange1",min:0,max:h,value:g,onChange:function(e){v(parseFloat(e.target.value))},onMouseUp:function(e){f(!1),w.current.seekTo(parseFloat(e.target.value))},onMouseDown:function(){f(!0)},step:.1})),A=r.a.createElement("div",{className:"d-flex flex-grow-1 justify-content-center align-items-center"},r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading...")));return r.a.createElement("form",{className:"justify-content-center d-flex flex-column"},s?A:I,r.a.createElement(N.a,{url:t,playing:n,width:0,height:0,onDuration:x,onProgress:function(e){var t=e.playedSeconds;d||t&&v(t)},onEnded:function(){c(!1)},onReady:function(){o(!1)},ref:w}))},x=n(21),w=n.n(x),k=n(31),S=function(){return function(){var e=Object(k.a)(w.a.mark((function e(t){var n,a;return w.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("https://frozen-dawn-89705.herokuapp.com/api/questions/");case 3:if((n=e.sent).ok){e.next=6;break}throw new Error("\u0414\u0430\u043d\u043d\u044b\u0435 \u0441 \u0441\u0435\u0440\u0432\u0435\u0440\u0430 \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u044b.");case 6:return e.next=8,n.json();case 8:a=e.sent,t({type:"LOAD_DATA",payload:{data:a,error:!1}}),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),t({type:"LOAD_DATA",payload:{data:[],error:!0}});case 15:case"end":return e.stop()}}),e,null,[[0,12]])})));return function(t){return e.apply(this,arguments)}}()},C=function(){var e=Object(i.c)((function(e){return e.birds.isGetCorrectAnswer})),t=Object(i.c)((function(e){var t=e.birds.currentQuestionId;return e.birds.questions[t].find((function(e){return e.correct}))})),n=Object(i.c)((function(e){return e.birds.playing})),a=Object(i.b)(),c=e?r.a.createElement("img",{src:t.img,alt:t.name,className:"img-fluid",height:350}):r.a.createElement("span",{role:"img","aria-label":"bird",style:{fontSize:160}},"\ud83d\udc26"),l=e?t.name:"\u0427\u0442\u043e \u044f \u0437\u0430 \u043f\u0442\u0438\u0446\u0430?";return r.a.createElement("section",{className:"py-2 card border-primary"},r.a.createElement("div",{className:"card-body row"},r.a.createElement("div",{className:"col-sm-5 d-flex flex-grow-1 justify-content-center align-items-center "},r.a.createElement("div",{className:"d-flex flex-grow-1 justify-content-center align-items-center ",style:{minHeight:350}},c)),r.a.createElement("div",{className:"col-sm-7 col-12 justify-content-center d-flex flex-column p-3"},r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center"},l)),r.a.createElement(h,{playing:n,setPlaying:function(){a({type:"ON_SET_PLAYING"})},url:t.audio}))))},I=function(){var e=Object(i.c)((function(e){return!(e.birds.questions.length-1>e.birds.currentQuestionId&&e.birds.isGetCorrectAnswer)})),t=e?"btn btn-primary btn-lg btn-block mt-2 disabled":"btn btn-primary btn-lg btn-block mt-2",n=Object(i.b)();return r.a.createElement("section",null,r.a.createElement("button",{type:"button",disabled:e,className:t,onClick:function(){n({type:"ON_CLICK_NEXT_QUESTION"})}},"\u0414\u0430\u043b\u044c\u0448\u0435"))},A=function(e){var t=e.answer,n=e.onAnswerClick,a="btn btn-secondary my-1";return t.clicked&&t.correct?a="btn btn-outline-success my-1":t.clicked&&!t.correct&&(a="btn btn-outline-danger my-1"),r.a.createElement("button",{type:"button",id:"d".concat(t.id),className:a,onClick:function(){n(t.id)}},t.name)},_=function(){var e=Object(i.c)((function(e){var t=e.birds.currentQuestionId;return e.birds.questions[t].map((function(e){return{id:e.id,name:e.name,clicked:e.clicked,correct:e.correct}}))})),t=Object(i.c)((function(e){return e.birds.isGetCorrectAnswer})),n=Object(i.b)(),c=Object(a.useState)(!0),l=Object(j.a)(c,2),s=l[0],o=l[1],u=Object(a.useState)(""),m=Object(j.a)(u,2),d=m[0],b=m[1],f=Object(a.useState)(""),E=Object(j.a)(f,2),p=E[0],g=E[1],v=function(a){var r=e.find((function(e){return e.id===a}));t||r.clicked||(r.correct?(b("./songbirds/sounds/correct.mp3"),o(!0),g("".concat(Math.random()))):(b("./songbirds/sounds/wrong.mp3"),o(!0),g("".concat(Math.random())))),n(function(e){return{type:"ON_CLICK_ANSWER",payload:e}}(a))};return r.a.createElement("section",{className:"col-md-5"},r.a.createElement("div",{className:"btn-group-vertical d-flex"},e.map((function(e){return r.a.createElement(A,{key:e.id,answer:e,onAnswerClick:v})})),r.a.createElement(N.a,{key:p,width:0,height:0,url:d,playing:s})))},T=function(){var e=Object(a.useState)(!1),t=Object(j.a)(e,2),n=t[0],c=t[1],l=Object(i.c)((function(e){return e.birds.questions[e.birds.currentQuestionId].find((function(t){return t.id===e.birds.activeId}))}));return r.a.createElement("div",{className:"mx-0 row pt-1"},r.a.createElement("div",{className:"col-sm-5 d-flex flex-grow-1 justify-content-center align-items-center "},r.a.createElement("div",{className:"d-flex flex-grow-1 justify-content-center align-items-center pt-3"},r.a.createElement("img",{src:l.img,alt:l.name,className:"img-fluid"}))),r.a.createElement("div",{className:"col-sm-7 col-12"},r.a.createElement("div",null,r.a.createElement("h2",{className:"text-center"},l.name)),r.a.createElement("div",null,r.a.createElement("p",{className:"text-center"},l.latinName)),r.a.createElement(h,{playing:n,setPlaying:c,url:l.audio})),r.a.createElement("p",{className:"text-justify pt-3"},l.description))},q=function(){var e=Object(i.c)((function(e){var t=e.birds.currentQuestionId;return e.birds.questions[t].some((function(e){return e.clicked}))}));return r.a.createElement("section",{className:"col-md-7 d-flex justify-content-center align-items-center"},e?r.a.createElement(T,null):r.a.createElement("p",{className:"text-center h4 p-2"},"\u041f\u043e\u0441\u043b\u0443\u0448\u0430\u0439\u0442\u0435 \u043f\u043b\u0435\u0435\u0440 \u0438 \u0432\u044b\u0431\u0435\u0440\u0438\u0442\u0435 \u043d\u0430\u0437\u0432\u0430\u043d\u0438\u0435 \u043f\u0442\u0438\u0446\u044b, \u0447\u0435\u0439 \u0433\u043e\u043b\u043e\u0441 \u043f\u0440\u043e\u0437\u0432\u0443\u0447\u0430\u043b..."))},L=function(){return r.a.createElement("h1",null,"Songbird",r.a.createElement("span",{role:"img","aria-label":"bird"},"\ud83d\udc26"))},Q=function(){var e=Object(i.c)((function(e){return e.birds.totalScore}));return r.a.createElement("header",{className:"row"},r.a.createElement("div",{className:"col-sm-6 col text-center"},r.a.createElement(L,null)),r.a.createElement("div",{className:"col-sm-6 text-center h1 text-primary"},"Score:",r.a.createElement("span",null," "),r.a.createElement("span",{className:"badge badge-pill badge-primary score"},e)))},G=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Q,null),r.a.createElement(y,null),r.a.createElement(C,null),r.a.createElement(I,null),r.a.createElement("div",{className:"row py-3 mx-0"},r.a.createElement(_,null),r.a.createElement(q,null)))},D=function(){var e=Object(i.b)(),t=Object(i.c)((function(e){return e.birds.totalScore})),n=r.a.createElement("button",{className:"btn btn-primary btn-lg btn-block mt-2",type:"button",onClick:function(){e({type:"ON_CLICK_RESTART"})}},"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437"),a=r.a.createElement("div",null,r.a.createElement("div",null,"\u0412\u043e\u0442 \u0432\u0430\u0448 \u043f\u0440\u0438\u0437"),r.a.createElement("div",{style:{fontSize:150}},r.a.createElement("span",{role:"img",className:"cake","aria-label":"bird"},"\ud83c\udf82")));return r.a.createElement("div",{className:"d-flex flex-grow-1 justify-content-center align-items-center vh-100"},r.a.createElement("div",{className:"text-center"},r.a.createElement(L,null),r.a.createElement("h2",null,"\u041f\u043e\u0437\u0434\u0440\u0430\u0432\u043b\u044f\u044e!"),r.a.createElement("p",{className:"h4"},"\u0412\u044b \u043d\u0430\u0431\u0440\u0430\u043b\u0438 ".concat(t," \u0438\u0437  ").concat(30," \u0431\u0430\u043b\u043b\u043e\u0432")),30===t?a:n))},R=function(){return r.a.createElement("div",{className:"d-flex flex-grow-1 justify-content-center align-items-center vh-100"},r.a.createElement("div",{className:"text-center"},r.a.createElement(L,null),r.a.createElement("h2",null,"\u041e\u0436\u0438\u0434\u0430\u0435\u043c ~ 20-30 sek (Heroku free)"),r.a.createElement("div",{className:"spinner-border text-primary",role:"status"},r.a.createElement("span",{className:"sr-only"},"Loading..."))))},M=function(){var e=Object(i.b)();return r.a.createElement("div",{className:"d-flex flex-grow-1 justify-content-center align-items-center vh-100"},r.a.createElement("div",{className:"text-center"},r.a.createElement(L,null),r.a.createElement("h2",null,"\u041e\u0448\u0438\u0431\u043a\u0430 \u0437\u0430\u0433\u0440\u0443\u0437\u043a\u0438 \u0434\u0430\u043d\u043d\u044b\u0445"),r.a.createElement("div",{style:{fontSize:150}},r.a.createElement("span",{role:"img","aria-label":"bird"},"\u2639\ufe0f")),r.a.createElement("button",{className:"btn btn-primary btn-lg btn-block mt-2",type:"button",onClick:function(){e({type:"START_LOADING"}),e(S())}},"\u041f\u043e\u043f\u0440\u043e\u0431\u043e\u0432\u0430\u0442\u044c \u0435\u0449\u0435 \u0440\u0430\u0437")))},K=function(){var e=Object(i.b)();Object(a.useEffect)((function(){e(S())}),[e]);var t=Object(i.c)((function(e){return e.birds.error})),n=Object(i.c)((function(e){return e.birds.loading})),c=Object(i.c)((function(e){return e.birds.isGetCorrectAnswer&&e.birds.questions.length-1===e.birds.currentQuestionId}));if(t)return r.a.createElement("main",null,r.a.createElement(M,null));if(n)return r.a.createElement("main",null,r.a.createElement(R,null));var l=c?r.a.createElement(D,null):r.a.createElement(G,null);return r.a.createElement("main",null,l)};var P=function(){return r.a.createElement(i.a,{store:v},r.a.createElement("div",{className:"container"},r.a.createElement(K,null)))};l.a.render(r.a.createElement(P,null),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.d44f6088.chunk.js.map